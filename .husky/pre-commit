set -e

CHANGED="$(git diff --cached --name-only)"

run_backend=false

echo "$CHANGED" | grep -q "^hackathon_backend/" && run_backend=true || true

# Frontend lint devre dışı bırakıldı
# if [ "$run_frontend" = true ]; then
#   echo "== Frontend changed: lint =="
#   npm --prefix hackathon_frontend run lint
# fi

if [ "$run_backend" = true ]; then
  echo "== Backend changed: uv run pytest =="
  cd hackathon_backend
  uv run pytest -q
  cd ..
else
  echo "== Backend not changed: skip pytest =="
fi
